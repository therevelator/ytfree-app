<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>YTFree ‚Äî Ad-Free YouTube Player</title>
  <meta name="description"
    content="Play YouTube videos without ads and in the background. Access your playlists, liked videos, and subscriptions.">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap"
    rel="stylesheet">
  <link rel="stylesheet" href="style.css">
</head>

<body>
  <!-- Background glow blobs -->
  <div class="bg-blob blob-1"></div>
  <div class="bg-blob blob-2"></div>
  <div class="bg-blob blob-3"></div>

  <!-- Header -->
  <header id="app-header">
    <div class="header-left">
      <div class="logo" id="logo-btn">
        <svg width="32" height="32" viewBox="0 0 32 32" fill="none">
          <rect width="32" height="32" rx="8" fill="url(#logo-grad)" />
          <polygon points="13,10 13,22 23,16" fill="white" />
          <defs>
            <linearGradient id="logo-grad" x1="0" y1="0" x2="32" y2="32">
              <stop offset="0%" stop-color="#7c3aed" />
              <stop offset="100%" stop-color="#ec4899" />
            </linearGradient>
          </defs>
        </svg>
        <span class="logo-text">YT<span class="logo-accent">Free</span></span>
      </div>
    </div>
    <div class="header-center">
      <div class="search-container" id="search-container">
        <svg class="search-icon" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"
          stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <circle cx="11" cy="11" r="8" />
          <line x1="21" y1="21" x2="16.65" y2="16.65" />
        </svg>
        <input type="text" id="search-input" placeholder="Search for videos‚Ä¶" autocomplete="off">
        <button id="search-btn" aria-label="Search">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"
            stroke-linecap="round" stroke-linejoin="round">
            <line x1="5" y1="12" x2="19" y2="12" />
            <polyline points="12 5 19 12 12 19" />
          </svg>
        </button>
      </div>
    </div>
    <div class="header-right">
      <button id="toggle-library-btn" class="icon-btn" aria-label="My Library" title="My Library">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
          stroke-linecap="round" stroke-linejoin="round">
          <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20" />
          <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z" />
        </svg>
      </button>
      <button id="toggle-queue-btn" class="icon-btn" aria-label="Toggle queue" title="Queue">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
          stroke-linecap="round" stroke-linejoin="round">
          <line x1="8" y1="6" x2="21" y2="6" />
          <line x1="8" y1="12" x2="21" y2="12" />
          <line x1="8" y1="18" x2="21" y2="18" />
          <line x1="3" y1="6" x2="3.01" y2="6" />
          <line x1="3" y1="12" x2="3.01" y2="12" />
          <line x1="3" y1="18" x2="3.01" y2="18" />
        </svg>
        <span class="queue-badge" id="queue-badge" style="display:none;">0</span>
      </button>
      <!-- Account button -->
      <div id="account-area">
        <button id="login-btn" class="accent-btn" style="display:none;">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
            stroke-linecap="round" stroke-linejoin="round">
            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2" />
            <circle cx="12" cy="7" r="4" />
          </svg>
          Sign In
        </button>
        <button id="user-btn" class="user-avatar-btn" style="display:none;" title="Account">
          <img id="user-avatar" src="" alt="Avatar">
        </button>
      </div>
    </div>
  </header>

  <!-- Main content area -->
  <main id="main-content">
    <!-- Welcome / Landing -->
    <section id="welcome-section" class="content-section active">
      <div class="welcome-content">
        <h1 class="welcome-title">Ad-Free YouTube,<br><span class="gradient-text">Background Playback</span></h1>
        <p class="welcome-sub">Search any video. Play without interruptions. Sign in to access your playlists and liked
          videos.</p>
        <div class="feature-cards">
          <div class="feature-card">
            <div class="feature-icon">üö´</div>
            <h3>Zero Ads</h3>
            <p>No pre-roll, mid-roll, or banner ads. Ever.</p>
          </div>
          <div class="feature-card">
            <div class="feature-icon">üéß</div>
            <h3>Background Play</h3>
            <p>Switch tabs or lock your screen ‚Äî audio keeps going.</p>
          </div>
          <div class="feature-card">
            <div class="feature-icon">üìã</div>
            <h3>Your Library</h3>
            <p>Access your playlists, liked videos, and subscriptions.</p>
          </div>
        </div>
      </div>
    </section>

    <!-- Search Results -->
    <section id="results-section" class="content-section">
      <div class="results-header">
        <h2 id="results-title">Results</h2>
        <span id="results-count" class="results-count"></span>
      </div>
      <div id="results-grid" class="results-grid"></div>
      <div id="results-loading" class="loading-indicator" style="display:none;">
        <div class="spinner"></div>
        <span>Searching‚Ä¶</span>
      </div>
      <div id="results-error" class="error-message" style="display:none;"></div>
    </section>

    <!-- Library Section (Playlists, Liked, Subs) -->
    <section id="library-section" class="content-section">
      <div class="library-wrapper">
        <div class="library-header">
          <h2>Your Library</h2>
        </div>
        <!-- Not signed in state -->
        <div id="library-login-prompt" class="library-login-prompt" style="display:none;">
          <div class="login-prompt-icon">üîê</div>
          <h3>Sign in to access your YouTube library</h3>
          <p>Connect your Google account to view playlists, liked videos, and subscriptions ‚Äî all ad-free.</p>
          <button id="library-login-btn" class="accent-btn large">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
              stroke-linecap="round" stroke-linejoin="round">
              <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2" />
              <circle cx="12" cy="7" r="4" />
            </svg>
            Sign in with Google
          </button>
          <div id="oauth-not-configured" class="oauth-notice" style="display:none;">
            <p>‚ö†Ô∏è Google OAuth is not configured on the server.</p>
            <p>Set <code>GOOGLE_CLIENT_ID</code> and <code>GOOGLE_CLIENT_SECRET</code> in <code>.env</code> and restart.
            </p>
          </div>
        </div>
        <!-- Signed in state -->
        <div id="library-content" style="display:none;">
          <div class="library-tabs">
            <button class="lib-tab active" data-tab="playlists">Playlists</button>
            <button class="lib-tab" data-tab="liked">Liked Videos</button>
            <button class="lib-tab" data-tab="subscriptions">Subscriptions</button>
          </div>
          <div id="library-grid" class="library-grid"></div>
          <div id="library-loading" class="loading-indicator" style="display:none;">
            <div class="spinner"></div>
            <span>Loading‚Ä¶</span>
          </div>
          <div id="library-error" class="error-message" style="display:none;"></div>
        </div>
      </div>
    </section>

    <!-- Playlist Detail View -->
    <section id="playlist-detail-section" class="content-section">
      <div class="playlist-detail-header">
        <button id="playlist-back-btn" class="icon-btn" title="Back to library">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
            stroke-linecap="round" stroke-linejoin="round">
            <line x1="19" y1="12" x2="5" y2="12" />
            <polyline points="12 19 5 12 12 5" />
          </svg>
        </button>
        <div>
          <h2 id="playlist-detail-title">Playlist</h2>
          <span id="playlist-detail-count" class="results-count"></span>
        </div>
        <button id="play-all-btn" class="accent-btn">‚ñ∂ Play All</button>
      </div>
      <div id="playlist-detail-grid" class="results-grid"></div>
      <div id="playlist-detail-loading" class="loading-indicator" style="display:none;">
        <div class="spinner"></div>
        <span>Loading‚Ä¶</span>
      </div>
    </section>

    <!-- Player Section -->
    <section id="player-section" class="content-section">
      <div class="player-wrapper">
        <div class="video-container" id="video-container">
          <video id="video-player" playsinline crossorigin="anonymous"></video>
          <div class="video-overlay" id="video-overlay">
            <div class="spinner"></div>
            <span>Loading stream‚Ä¶</span>
          </div>
        </div>
        <div class="player-info">
          <h2 id="player-title" class="player-title">‚Äî</h2>
          <p id="player-author" class="player-author">‚Äî</p>
          <div class="player-controls">
            <button id="prev-btn" class="ctrl-btn" aria-label="Previous" title="Previous">
              <svg width="22" height="22" viewBox="0 0 24 24" fill="currentColor">
                <path d="M6 6h2v12H6zm3.5 6 8.5 6V6z" />
              </svg>
            </button>
            <button id="play-pause-btn" class="ctrl-btn ctrl-play" aria-label="Play / Pause">
              <svg id="icon-play" width="28" height="28" viewBox="0 0 24 24" fill="currentColor">
                <polygon points="5,3 19,12 5,21" />
              </svg>
              <svg id="icon-pause" width="28" height="28" viewBox="0 0 24 24" fill="currentColor" style="display:none;">
                <rect x="6" y="4" width="4" height="16" />
                <rect x="14" y="4" width="4" height="16" />
              </svg>
            </button>
            <button id="next-btn" class="ctrl-btn" aria-label="Next" title="Next">
              <svg width="22" height="22" viewBox="0 0 24 24" fill="currentColor">
                <path d="M6 18l8.5-6L6 6v12zM16 6v12h2V6h-2z" />
              </svg>
            </button>
            <div class="volume-group">
              <button id="mute-btn" class="ctrl-btn" aria-label="Mute">
                <svg id="icon-vol" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                  stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5" />
                  <path d="M19.07 4.93a10 10 0 0 1 0 14.14" />
                  <path d="M15.54 8.46a5 5 0 0 1 0 7.07" />
                </svg>
                <svg id="icon-muted" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                  stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display:none;">
                  <polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5" />
                  <line x1="23" y1="9" x2="17" y2="15" />
                  <line x1="17" y1="9" x2="23" y2="15" />
                </svg>
              </button>
              <input type="range" id="volume-slider" min="0" max="1" step="0.01" value="0.8"
                class="slider volume-slider">
            </div>
            <div class="spacer"></div>
            <div class="progress-group">
              <span id="time-current" class="time-label">0:00</span>
              <input type="range" id="progress-slider" min="0" max="100" step="0.1" value="0"
                class="slider progress-slider">
              <span id="time-total" class="time-label">0:00</span>
            </div>
            <div class="spacer"></div>
            <button id="audio-mode-btn" class="ctrl-btn mode-btn" aria-label="Audio only" title="Audio Only">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                stroke-linecap="round" stroke-linejoin="round">
                <path d="M9 18V5l12-2v13" />
                <circle cx="6" cy="18" r="3" />
                <circle cx="18" cy="16" r="3" />
              </svg>
            </button>
            <button id="pip-btn" class="ctrl-btn" aria-label="Picture in picture" title="Picture-in-Picture">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                stroke-linecap="round" stroke-linejoin="round">
                <rect x="2" y="3" width="20" height="14" rx="2" />
                <rect x="11" y="9" width="9" height="6" rx="1" fill="currentColor" opacity="0.3" />
              </svg>
            </button>
          </div>
        </div>
      </div>
    </section>
  </main>

  <!-- Queue Sidebar -->
  <aside id="queue-sidebar" class="queue-sidebar">
    <div class="queue-header">
      <h3>Queue</h3>
      <div style="display:flex;gap:8px;">
        <button id="clear-queue-btn" class="text-btn" title="Clear queue">Clear</button>
        <button id="close-queue-btn" class="icon-btn" title="Close queue">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
            stroke-linecap="round" stroke-linejoin="round">
            <line x1="18" y1="6" x2="6" y2="18" />
            <line x1="6" y1="6" x2="18" y2="18" />
          </svg>
        </button>
      </div>
    </div>
    <div id="queue-list" class="queue-list">
      <div class="queue-empty">
        <p>Your queue is empty.</p>
        <p class="queue-hint">Search for videos and add them here.</p>
      </div>
    </div>
  </aside>

  <!-- User dropdown -->
  <div id="user-dropdown" class="user-dropdown" style="display:none;">
    <div class="dropdown-user-info">
      <img id="dropdown-avatar" src="" alt="">
      <div>
        <div id="dropdown-name" class="dropdown-name"></div>
        <div id="dropdown-email" class="dropdown-email"></div>
      </div>
    </div>
    <hr class="dropdown-divider">
    <button id="logout-btn" class="dropdown-item">
      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
        stroke-linecap="round" stroke-linejoin="round">
        <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4" />
        <polyline points="16 17 21 12 16 7" />
        <line x1="21" y1="12" x2="9" y2="12" />
      </svg>
      Sign Out
    </button>
  </div>

  <!-- Hidden audio element for background playback -->
  <audio id="audio-player" preload="none"></audio>

  <script src="app.js"></script>
</body>

</html>